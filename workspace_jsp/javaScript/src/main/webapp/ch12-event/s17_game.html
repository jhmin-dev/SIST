<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>가위바위보 게임</title>
<style type="text/css">
	body {
		font-family: sans-serif;
	}
	h1 {
		text-align: center;
	}
	table {
		width: 700px;
		margin: 0 auto;
	}
	.results {
		text-align: center;
		font-weight: bold;
		font-size: 2.5em;
		background-color: #f4f2c6;
	}
	.choice {
		font-size: 1.2em;
		font-weight: bold;
		text-align: center;
	}
	.user_option {
		cursor: pointer;
	}
</style>
<script type="text/javascript">
	window.onload = function() {
		// 컴퓨터가 선택한 값을 표시할 이미지
		var comImg = document.getElementById('com_img');
		// 사용자가 선택한 값을 표시할 이미지
		var userImg = document.getElementById('user_img');
		
		// 사용자가 선택할 수 있는 이미지 이벤트 연결
		var userOption = document.getElementsByClassName('user_option');
		for(var i=0;i<userOption.length;i++) {
			userOption[i].onclick = function() {
				// 사용자가 선택한 값
				let user = this.id.charAt(this.id.length - 1);
				// console.log(user + ',' + i); // i값을 사용하려면 for문 초기식에서 i를 전역 변수가 아니라 블럭 범위 변수로 선언해야 함

				// 사용자가 선택한 이미지 표시
				userImg.style.display = '';
				userImg.src = this.src;

				// 컴퓨터가 선택한 값				
				let com = Math.floor(Math.random() * 3);
				
				// 컴퓨터가 선택한 이미지 표시
				comImg.style.display = '';
				comImg.src = '../images/gimg' + com + '.png';
				
				/* 
				가위바위보 결과
				컴퓨터 사용자 차이 결과
				0	0	0	무승부
				0	1	-1	컴퓨터 패배
				0	2	-2	컴퓨터 승리
				1	0	1	컴퓨터 승리
				1	1	0	무승부
				1	2	-1	컴퓨터 패배
				2	0	2	컴퓨터 패배
				2	1	1	컴퓨터 승리
				2	2	0	무승부
				*/
				var result;
				var color;
				var num = com - user;
				if(num==0) { // 무승부
					result = ['무', '무'];
					color = ['#f4f2c6', '#f4f2c6'];
				}
				else if(num==-2 || num==1) {
					result = ['승', '패'];
					color = ['#3fdbd6', '#f4f2c6'];
				}
				else if(num==2 || num==-1) {
					result = ['패', '승'];
					color = ['#f4f2c6', '#3fdbd6'];
				}
				
				// 결과 표시
				let results = document.getElementsByClassName('results');
				results[0].innerHTML = '컴퓨터 ' + result[0];
				results[0].style.backgroundColor = color[0];
				results[1].innerHTML = '사용자 ' + result[1];
				results[1].style.backgroundColor = color[1];
				
				/*
				if(user-com==0) {
					results[0].innerHTML = '컴퓨터 무승부';
					results[1].innerHTML = '사용자 무승부';
				}
				else if(user-com==1 || user-com==-2) {
					results[0].innerHTML = '컴퓨터 패배';
					results[1].innerHTML = '사용자 승리';
				}
				else if(user-com==2 || user-com==-1) {
					results[0].innerHTML = '컴퓨터 승리';
					results[1].innerHTML = '사용자 패배';
				}
				for(let j=0;j<results.length;j++) {
					if(results[j].innerHTML.endsWith('승리')) {
						results[j].style.backgroundColor = 'powderblue';
					}
					else {
						results[j].style.backgroundColor = '';
					}
				}
				*/
			};
		}
	};
</script>
</head>
<body>
	<h1>가위바위보 게임</h1>
	<table>
		<tr>
			<td colspan="2"><b>[아래의 가위, 바위, 보 아이콘을 클릭하세요]</b></td>
		</tr>
		<tr>
			<td class="choice" colspan="2">
				<img class="user_option" id="gimg0" src="../images/gimg0.png" width="90">
				<img class="user_option" id="gimg1" src="../images/gimg1.png" width="90">
				<img class="user_option" id="gimg2" src="../images/gimg2.png" width="90">
			</td>
		</tr>
		<tr height="100">
			<td class="results">컴퓨터</td>
			<td class="results">사용자</td>
		</tr>
		<tr height="150">
			<td class="result-img"><img id="com_img" style="display:none;"></td>
			<td class="result-img"><img id="user_img" style="display:none;"></td>
		</tr>
	</table>
</body>
</html>